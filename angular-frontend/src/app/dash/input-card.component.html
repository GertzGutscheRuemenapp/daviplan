<mat-card class="dashboard-card mat-elevation-z0"
          [ngClass]="{'borderless': borderless, 'disabled': disabled}"
          [style.width]="width? width: ''">
  <h4 *ngIf="title" class="title"
      [style.width]="(infoText && topRightHelp)? 'calc(100% - 100px)': '100%'">
    {{title}}
  </h4>
  <div *ngIf="!disabled && infoText && topRightHelp" class="info-text"
       [ngClass]="{'top-right': topRightHelp}"
       [style.marginTop]="!title? '0' : '-35px'"
       [style.marginBottom]="!title? '-25px' : '5px'"  >
    <ng-container *ngTemplateOutlet="helpContent"></ng-container>
  </div>
  <span *ngIf="subtitle" class="subtitle1 sub">{{subtitle}}</span>
  <ng-content></ng-content>
  <ng-container *ngTemplateOutlet="previewTemplate;"></ng-container>
  <div>
    <button #editButton
            *ngIf="editTemplate && !editButton"
            class="mat-button-dv"
            mat-button color="primary"
            style="margin-top: 15px; margin-left: -2px;" i18n>
      <mat-icon>edit</mat-icon>editieren
    </button>
  </div>
  <ng-content select="[between]"></ng-content>
  <div *ngIf="!disabled && infoText && !topRightHelp" class="info-text" style="margin-top: 15px;">
    <ng-container *ngTemplateOutlet="helpContent"></ng-container>
  </div>
  <ng-content select="[after]"></ng-content>
</mat-card>

<ng-template #helpContent>
  <mat-expansion-panel class="text-panel" [expanded]="infoExpanded">
    <mat-expansion-panel-header>
      <mat-icon color="primary" class="material-icons-outlined"
                style="margin-right: 5px;">help_outline</mat-icon>
      <span class="subtitle1" style="color: grey;">Hilfe</span>
    </mat-expansion-panel-header>
    <span [innerHTML]="infoText"></span>
  </mat-expansion-panel>
</ng-template>
